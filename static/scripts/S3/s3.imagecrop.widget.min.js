(function(c){function t(b){var e;return b&&b.constructor==Array&&3==b.length?b:(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]:(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(e[1]),2.55*parseFloat(e[2]),2.55*parseFloat(e[3])]:(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:
(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]:h[c.trim(b).toLowerCase()]}c.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),function(b,e){c.fx.step[e]=function(b){if(0==b.state){var h;h=b.elem;var Q=e,K;do{K=c.curCSS(h,Q);if(""!=K&&"transparent"!=K||c.nodeName(h,"body"))break;Q="backgroundColor"}while(h=h.parentNode);h=t(K);b.start=h;b.end=t(b.end)}b.elem.style[e]=
"rgb("+[Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0]),255),0),Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1]),255),0),Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2]),255),0)].join()+")"}});var h={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,
139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,
203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(c){c.Jcrop=function(t,h){function b(a){return Math.round(a)+"px"}function e(a){a=c(a).offset();return[a.left,a.top]}function g(a){return[a.pageX-G[0],a.pageY-G[1]]}function y(B){"object"!==typeof B&&(B={});a=c.extend(a,B);c.each(["onChange","onSelect","onRelease","onDblClick"],function(B,b){"function"!==typeof a[b]&&(a[b]=function(){})})}function Q(a,b,A){G=e(u);E.setCursor("move"===a?a:a+"-resize");if("move"===a)return E.activateHandlers(ta(b),Z,A);b=v.getFixed();var c=fa(a),d=v.getCorner(fa(c));
v.setPressed(v.getCorner(c));v.setCurrent(d);E.activateHandlers(K(a,b),Z,A)}function K(B,b){return function(A){if(a.aspectRatio)switch(B){case "e":A[1]=b.y+1;break;case "w":A[1]=b.y+1;break;case "n":A[0]=b.x+1;break;case "s":A[0]=b.x+1}else switch(B){case "e":A[1]=b.y2;break;case "w":A[1]=b.y2;break;case "n":A[0]=b.x2;break;case "s":A[0]=b.x2}v.setCurrent(A);n.update()}}function ta(a){var b=a;aa.watchKeys();return function(a){v.moveOffset([a[0]-b[0],a[1]-b[1]]);b=a;n.update()}}function fa(a){switch(a){case "n":return"sw";
case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}function ha(b){return function(c){if(a.disabled||"move"===b&&!a.allowMove)return!1;G=e(u);L=!0;Q(b,g(c));c.stopPropagation();c.preventDefault();return!1}}function ia(a,b,c){var e=a.width(),d=a.height();e>b&&0<b&&(e=b,d=b/a.width()*a.height());d>c&&0<c&&(d=c,e=c/a.height()*a.width());x=a.width()/e;z=a.height()/d;a.width(e).height(d)}function R(a){return{x:a.x*
x,y:a.y*z,x2:a.x2*x,y2:a.y2*z,w:a.w*x,h:a.h*z}}function Z(b){b=v.getFixed();b.w>a.minSelect[0]&&b.h>a.minSelect[1]?(n.enableHandles(),n.done()):n.release();E.setCursor(a.allowSelect?"crosshair":"default")}function ja(b){if(a.disabled||!a.allowSelect)return!1;L=!0;G=e(u);n.disableHandles();E.setCursor("crosshair");var c=g(b);v.setPressed(c);n.update();E.activateHandlers(ua,Z,"touch"===b.type.substring(0,5));aa.watchKeys();b.stopPropagation();b.preventDefault();return!1}function ua(a){v.setCurrent(a);
n.update()}function ka(){var b=c("<div></div>").addClass(a.baseClass+"-tracker");la&&b.css({opacity:0,backgroundColor:"white"});return b}function ma(b){na([b[0]/x,b[1]/z,b[2]/x,b[3]/z]);a.onSelect.call(C,R(v.getFixed()));n.enableHandles()}function na(a){v.setPressed([a[0],a[1]]);v.setCurrent([a[2],a[3]]);n.update()}function oa(){a.disabled=!0;n.disableHandles();n.setCursor("default");E.setCursor("default")}function pa(){a.disabled=!1;ba()}function ca(b,e,A){e=e||a.bgColor;a.bgFade&&c.fx.step.hasOwnProperty("backgroundColor")&&
a.fadeTime&&!A?b.animate({backgroundColor:e},{queue:!1,duration:a.fadeTime}):b.css("backgroundColor",e)}function ba(b){a.allowResize?b?n.enableOnly():n.enableHandles():n.disableHandles();E.setCursor(a.allowSelect?"crosshair":"default");n.setCursor(a.allowMove?"move":"default");a.hasOwnProperty("trueSize")&&(x=a.trueSize[0]/k,z=a.trueSize[1]/s);a.hasOwnProperty("setSelect")&&(ma(a.setSelect),n.done(),delete a.setSelect);H.refresh();a.bgColor!=qa&&(ca(a.shade?H.getShades():F,a.shade?a.shadeColor||a.bgColor:
a.bgColor),qa=a.bgColor);S!=a.bgOpacity&&(S=a.bgOpacity,a.shade?H.refresh():n.setBgOpacity(S));T=a.maxSize[0]||0;U=a.maxSize[1]||0;V=a.minSize[0]||0;W=a.minSize[1]||0;a.hasOwnProperty("outerImage")&&(u.attr("src",a.outerImage),delete a.outerImage);n.refresh()}var a=c.extend({},c.Jcrop.defaults),G,M=navigator.userAgent.toLowerCase(),la=/msie/.test(M),ra=/msie [1-6]\./.test(M);"object"!==typeof t&&(t=c(t)[0]);"object"!==typeof h&&(h={});y(h);var M={border:"none",visibility:"visible",margin:0,padding:0,
position:"absolute",top:0,left:0},w=c(t),sa=!0;if("IMG"==t.tagName){if(0!=w[0].width&&0!=w[0].height)w.width(w[0].width),w.height(w[0].height);else{var da=new Image;da.src=w[0].src;w.width(da.width);w.height(da.height)}var u=w.clone().removeAttr("id").css(M).show();u.width(w.width());u.height(w.height());w.after(u).hide()}else u=w.css(M).show(),sa=!1,null===a.shade&&(a.shade=!0);ia(u,a.boxWidth,a.boxHeight);var k=u.width(),s=u.height(),F=c("<div />").width(k).height(s).addClass(a.baseClass+"-holder").css({position:"relative",
backgroundColor:a.bgColor}).insertAfter(w).append(u);a.addClass&&F.addClass(a.addClass);var I=c("<div />"),Y=c("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),N=c("<div />").width("100%").height("100%").css("zIndex",320),O=c("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var b=v.getFixed();a.onDblClick.call(C,b)}).insertBefore(u).append(Y,N);sa&&(I=c("<img />").attr("src",u.attr("src")).css(M).width(k).height(s),Y.append(I));ra&&
O.css({overflowY:"hidden"});var P=a.boundary,J=ka().width(k+2*P).height(s+2*P).css({position:"absolute",top:b(-P),left:b(-P),zIndex:290}).mousedown(ja),qa=a.bgColor,S=a.bgOpacity,T,U,V,W,x,z,L,ea,va;G=e(u);var D=function(){function b(){var a={},c=["touchstart","touchmove","touchend"],d=document.createElement("div"),f;try{for(f=0;f<c.length;f++){var e=c[f],e="on"+e,m=e in d;m||(d.setAttribute(e,"return;"),m="function"==typeof d[e]);a[c[f]]=m}return a.touchstart&&a.touchend&&a.touchmove}catch(n){return!1}}
var c;c=!0===a.touchSupport||!1===a.touchSupport?a.touchSupport:b();return{createDragger:function(b){return function(c){if(a.disabled||"move"===b&&!a.allowMove)return!1;G=e(u);L=!0;Q(b,g(D.cfilter(c)),!0);c.stopPropagation();c.preventDefault();return!1}},newSelection:function(a){return ja(D.cfilter(a))},cfilter:function(a){a.pageX=a.originalEvent.changedTouches[0].pageX;a.pageY=a.originalEvent.changedTouches[0].pageY;return a},isSupported:b,support:c}}(),v=function(){function b(){if(!a.aspectRatio){var p=
r-d,c=m-f;T&&Math.abs(p)>T&&(r=0<p?d+T:d-T);U&&Math.abs(c)>U&&(m=0<c?f+U:f-U);W/z&&Math.abs(c)<W/z&&(m=0<c?f+W/z:f-W/z);V/x&&Math.abs(p)<V/x&&(r=0<p?d+V/x:d-V/x);0>d&&(r-=d,d-=d);0>f&&(m-=f,f-=f);0>r&&(d-=r,r-=r);0>m&&(f-=m,m-=m);r>k&&(p=r-k,d-=p,r-=p);m>s&&(p=m-s,f-=p,m-=p);d>k&&(p=d-s,m-=p,f-=p);f>s&&(p=f-s,m-=p,f-=p);return n(e(d,f,r,m))}var p=a.aspectRatio,c=a.minSize[0]/x,h=a.maxSize[0]/x,B=r-d,g=m-f,q=Math.abs(B),l=Math.abs(g);0===h&&(h=10*k);q/l<p?(q=m,l*=p,l=0>B?d-l:l+d,0>l?(l=0,q=Math.abs((l-
d)/p),q=0>g?f-q:q+f):l>k&&(l=k,q=Math.abs((l-d)/p),q=0>g?f-q:q+f)):(l=r,q/=p,q=0>g?f-q:f+q,0>q?(q=0,l=Math.abs((q-f)*p),l=0>B?d-l:l+d):q>s&&(q=s,l=Math.abs(q-f)*p,l=0>B?d-l:l+d));l>d?(l-d<c?l=d+c:l-d>h&&(l=d+h),q=q>f?f+(l-d)/p:f-(l-d)/p):l<d&&(d-l<c?l=d-c:d-l>h&&(l=d-h),q=q>f?f+(d-l)/p:f-(d-l)/p);0>l?(d-=l,l=0):l>k&&(d-=l-k,l=k);0>q?(f-=q,q=0):q>s&&(f-=q-s,q=s);return n(e(d,f,l,q))}function c(a){0>a[0]&&(a[0]=0);0>a[1]&&(a[1]=0);a[0]>k&&(a[0]=k);a[1]>s&&(a[1]=s);return[Math.round(a[0]),Math.round(a[1])]}
function e(a,b,c,d){var f=a,q=c,l=b,m=d;c<a&&(f=c,q=a);d<b&&(l=d,m=b);return[f,l,q,m]}function n(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var d=0,f=0,r=0,m=0,h,g;return{flipCoords:e,setPressed:function(a){a=c(a);r=d=a[0];m=f=a[1]},setCurrent:function(a){a=c(a);h=a[0]-r;g=a[1]-m;r=a[0];m=a[1]},getOffset:function(){return[h,g]},moveOffset:function(a){var b=a[0];a=a[1];0>d+b&&(b-=b+d);0>f+a&&(a-=a+f);s<m+a&&(a+=s-(m+a));k<r+b&&(b+=k-(r+b));d+=b;r+=b;f+=a;m+=a},getCorner:function(a){var c=
b();switch(a){case "ne":return[c.x2,c.y];case "nw":return[c.x,c.y];case "se":return[c.x2,c.y2];case "sw":return[c.x,c.y2]}},getFixed:b}}(),H=function(){function e(){return h(v.getFixed())}function h(a){p.top.css({left:b(a.x),width:b(a.w),height:b(a.y)});p.bottom.css({top:b(a.y2),left:b(a.x),width:b(a.w),height:b(s-a.y2)});p.right.css({left:b(a.x2),width:b(k-a.x2)});p.left.css({width:b(a.x)})}function g(){return c("<div />").css({position:"absolute",backgroundColor:a.shadeColor||a.bgColor}).appendTo(t)}
function ga(){X||(X=!0,t.insertBefore(u),e(),n.setBgOpacity(1,0,1),I.hide(),d(a.shadeColor||a.bgColor,1),n.isAwake()?r(a.bgOpacity,1):r(1,1))}function d(a,b){ca(m(),a,b)}function f(){X&&(t.remove(),I.show(),X=!1,n.isAwake()?n.setBgOpacity(a.bgOpacity,1,1):(n.setBgOpacity(1,1,1),n.disableHandles()),ca(F,0,1))}function r(b,c){X&&(a.bgFade&&!c?t.animate({opacity:1-b},{queue:!1,duration:a.fadeTime}):t.css({opacity:1-b}))}function m(){return t.children()}var X=!1,t=c("<div />").css({position:"absolute",
zIndex:240,opacity:0}),p={top:g(),left:g().height(s),right:g().height(s),bottom:g()};return{update:e,updateRaw:h,getShades:m,setBgColor:d,enable:ga,disable:f,resize:function(a,c){p.left.css({height:b(c)});p.right.css({height:b(c)})},refresh:function(){a.shade?ga():f();n.isAwake()&&r(a.bgOpacity)},opacity:r}}(),n=function(){function e(a,b){var d=c("<div />").mousedown(ha(a)).css({cursor:a+"-resize",position:"absolute",zIndex:b}).addClass("ord-"+a);D.support&&d.bind("touchstart.jcrop",D.createDragger(a));
N.append(d);return d}function h(a){var b;for(b=0;b<a.length;b++)e(a[b],w++).addClass("jcrop-dragbar")}function g(b){var d,e;for(e=0;e<b.length;e++){switch(b[e]){case "n":d="hline";break;case "s":d="hline bottom";break;case "e":d="vline right";break;case "w":d="vline"}var f=d,f=c("<div />").css({position:"absolute",opacity:a.borderOpacity}).addClass(a.baseClass+"-"+f);Y.append(f)}}function n(b){var c;for(c=0;c<b.length;c++){var d=a.handleSize,f=e(b[c],w++).css({opacity:a.handleOpacity}).addClass(a.baseClass+
"-handle");d&&f.width(d).height(d)}}function d(){var a=v.getFixed();v.setPressed([a.x,a.y]);v.setCurrent([a.x2,a.y2]);f()}function f(a){if(k)return r(a)}function r(c){var d=v.getFixed(),e=d.h;O.width(Math.round(d.w)).height(Math.round(e));var e=d.x,f=d.y;a.shade||I.css({top:b(-f),left:b(-e)});O.css({top:b(f),left:b(e)});a.shade&&H.updateRaw(d);k||(O.show(),a.shade?H.opacity(S):m(S,!0),k=!0);c?a.onSelect.call(C,R(d)):a.onChange.call(C,R(d))}function m(b,c,d){if(k||c)a.bgFade&&!d?u.animate({opacity:b},
{queue:!1,duration:a.fadeTime}):u.css("opacity",b)}function s(){x=!0;if(a.allowResize)return N.show(),!0}function t(){x=!1;N.hide()}function p(a){a?(ea=!0,t()):(ea=!1,s())}var k,w=370,x=!1;a.dragEdges&&c.isArray(a.createDragbars)&&h(a.createDragbars);c.isArray(a.createHandles)&&n(a.createHandles);a.drawBorders&&c.isArray(a.createBorders)&&g(a.createBorders);c(document).bind("touchstart.jcrop-ios",function(a){c(a.currentTarget).hasClass("jcrop-tracker")&&a.stopPropagation()});var z=ka().mousedown(ha("move")).css({cursor:"move",
position:"absolute",zIndex:360});D.support&&z.bind("touchstart.jcrop",D.createDragger("move"));Y.append(z);t();return{updateVisible:f,update:r,release:function(){t();O.hide();a.shade?H.opacity(1):m(1);k=!1;a.onRelease.call(C)},refresh:d,isAwake:function(){return k},setCursor:function(a){z.css("cursor",a)},enableHandles:s,enableOnly:function(){x=!0},showHandles:function(){x&&N.show()},disableHandles:t,animMode:p,setBgOpacity:m,done:function(){p(!1);d()}}}(),E=function(){function b(a){d(g(a));return!1}
function e(b){b.preventDefault();b.stopPropagation();L&&(L=!1,f(g(b)),n.isAwake()&&a.onSelect.call(C,R(v.getFixed())),J.css({zIndex:290}),c(document).unbind(".jcrop"),d=function(){},f=function(){});return!1}function h(a){d(g(D.cfilter(a)));return!1}function k(a){return e(D.cfilter(a))}var d=function(){},f=function(){},r=a.trackDocument;r||J.mousemove(b).mouseup(e).mouseout(e);u.before(J);return{activateHandlers:function(a,g,n){L=!0;d=a;f=g;J.css({zIndex:450});n?c(document).bind("touchmove.jcrop",
h).bind("touchend.jcrop",k):r&&c(document).bind("mousemove.jcrop",b).bind("mouseup.jcrop",e);return!1},setCursor:function(a){J.css("cursor",a)}}}(),aa=function(){function b(a){g.hide()}function e(b,c,d){a.allowMove&&(v.moveOffset([c,d]),n.updateVisible(!0));b.preventDefault();b.stopPropagation()}function h(b){if(b.ctrlKey||b.metaKey)return!0;var c=(va=b.shiftKey?!0:!1)?10:1;switch(b.keyCode){case 37:e(b,-c,0);break;case 39:e(b,c,0);break;case 38:e(b,0,-c);break;case 40:e(b,0,c);break;case 27:a.allowSelect&&
n.release();break;case 9:return!0}return!1}var g=c('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),d=c("<div />").css({position:"absolute",overflow:"hidden"}).append(g);a.keySupport&&(g.keydown(h).blur(b),ra||!a.fixedSupport?(g.css({position:"absolute",left:"-20px"}),d.append(g).insertBefore(u)):g.insertBefore(u));return{watchKeys:function(){a.keySupport&&(g.show(),g.focus())}}}();D.support&&J.bind("touchstart.jcrop",D.newSelection);N.hide();ba(!0);
var C={setImage:function(b,c){n.release();oa();var e=new Image;e.onload=function(){var g=e.height,d=a.boxWidth,f=a.boxHeight;u.width(e.width).height(g);u.attr("src",b);I.attr("src",b);ia(u,d,f);k=u.width();s=u.height();I.width(k).height(s);J.width(k+2*P).height(s+2*P);F.width(k).height(s);H.resize(k,s);pa();"function"===typeof c&&c.call(C)};e.src=b},animateTo:function(b,c){var e=b[0]/x,g=b[1]/z,d=b[2]/x,f=b[3]/z;if(!ea){var h=v.flipCoords(e,g,d,f),m=v.getFixed(),k=[m.x,m.y,m.x2,m.y2],s=a.animationDelay,
p=h[0]-k[0],t=h[1]-k[1],u=h[2]-k[2],w=h[3]-k[3],y=0,q=a.swingSpeed,e=k[0],g=k[1],d=k[2],f=k[3];n.animMode(!0);var l=function(){return function(){y+=(100-y)/q;k[0]=Math.round(e+y/100*p);k[1]=Math.round(g+y/100*t);k[2]=Math.round(d+y/100*u);k[3]=Math.round(f+y/100*w);99.8<=y&&(y=100);100>y?(na(k),window.setTimeout(l,s)):(n.done(),n.animMode(!1),"function"===typeof c&&c.call(C))}}();window.setTimeout(l,s)}},setSelect:ma,setOptions:function(a){y(a);ba()},tellSelect:function(){return R(v.getFixed())},
tellScaled:function(){return v.getFixed()},setClass:function(b){F.removeClass().addClass(a.baseClass+"-holder").addClass(b)},disable:oa,enable:pa,cancel:function(){n.done();E.activateHandlers(null,null)},release:n.release,destroy:function(){F.remove();w.show();w.css("visibility","visible");c(t).removeData("Jcrop")},focus:aa.watchKeys,getBounds:function(){return[k*x,s*z]},getWidgetSize:function(){return[k,s]},getScaleFactor:function(){return[x,z]},getOptions:function(){return a},ui:{holder:F,selection:O}};
la&&F.bind("selectstart",function(){return!1});w.data("Jcrop",C);return C};c.fn.Jcrop=function(t,h){var b;this.each(function(){if(c(this).data("Jcrop")){if("api"===t)return c(this).data("Jcrop");c(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?c.Jcrop.Loader(this,function(){c(this).css({display:"block",visibility:"hidden"});b=c.Jcrop(this,t);c.isFunction(h)&&h.call(b)}):(c(this).css({display:"block",visibility:"hidden"}),b=c.Jcrop(this,t),c.isFunction(h)&&h.call(b))});return this};c.Jcrop.Loader=
function(t,h,b){function e(){y.complete?(g.unbind(".jcloader"),c.isFunction(h)&&h.call(y)):window.setTimeout(e,50)}var g=c(t),y=g[0];g.bind("load.jcloader",e).bind("error.jcloader",function(e){g.unbind(".jcloader");c.isFunction(b)&&b.call(y)});y.complete&&c.isFunction(h)&&(g.unbind(".jcloader"),h.call(y))};c.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,
aspectRatio:0,keySupport:!0,createHandles:"n s e w nw ne se sw".split(" "),createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);
$(function(){var c="png PNG jpg JPG jpeg JPEG gif GIF tif TIF tiff TIFF bmp BMP raw RAW".split(" "),t=function(b,c){var g;c[0]>b[0]&&(g=b[0]/c[0],c[0]*=g,c[1]*=g);c[1]>b[1]&&(g=b[1]/c[1],c[0]*=g,c[1]*=g);c[0]=Math.floor(c[0]);c[1]=Math.floor(c[1]);return c},h;$(".imagecrop-upload").change(function(){var b=$(this);$(".imagecrop-preview");var e=b.val().split("."),e=e[e.length-1];-1==$.inArray(e,c)&&(alert(i18n.invalid_image),b.val(""))});$(".imagecrop-preview").Jcrop({onChange:function(b){b=b.x+","+
b.y+","+b.x2+","+b.y2;$('input[name="imagecrop-points"]').val(b)}},function(){h=this;this.disable()});$(".imagecrop-toggle").click(function(){$(this).val()===i18n.crop_image?($(this).val(i18n.cancel_crop),$(".imagecrop-help").show(),h.enable()):($(this).val(i18n.crop_image),$(".imagecrop-help").hide(),h.release(),h.disable(),$('input[name="imagecrop-points"]').val(""))});$(".imagecrop-canvas").bind("dragover",function(b){b.preventDefault()});$(".imagecrop-canvas").bind("drop",function(b){b.preventDefault();
var c=new FileReader,g=$(this),y=b.originalEvent.dataTransfer.files[0].name;c.onload=function(b){var c=new Image;c.src=b.target.result;c.onload=function(){var b=t([g.width(),g.height()],[this.width,this.height]);g[0].width=b[0];g[0].height=b[1];g[0].getContext("2d").drawImage(this,0,0,b[0],b[1]);$(".imagecrop-upload").hide();$(".imagecrop-data").val(y+";"+g[0].toDataURL());g.Jcrop({onChange:function(b){b=b.x+","+b.y+","+b.x2+","+b.y2;$('input[name="imagecrop-points"]').val(b)}},function(){h=this})}};
c.readAsDataURL(b.originalEvent.dataTransfer.files[0])})});
